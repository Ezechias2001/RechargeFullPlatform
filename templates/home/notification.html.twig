{% extends 'base.html.twig' %}

{% block title %}Notifications
{% endblock %}

{% block body %}
	{% include "__fragments/nav.html.twig" %}
	{% include "__fragments/headerAdmin.html.twig" %}
	<!-- Top bar END -->
	<section class="pt-0 mx-2">
		<div
			class="container vstack gap-4">
			<!-- Title START -->
			<div class="row">
				<div class="col-12">
					<h1 class="fs-4 mb-0">
						<i class="bi bi-bell fa-fw me-1"></i>Notifications</h1>
				</div>
			</div>
			<!-- Title END -->

			<!-- Activities START -->
			<div class="row">
				<div class="col-12">
					<div
						class="card border">
						<!-- Card header -->
						<div class="card-header border-bottom">
							<h5 class="card-header-title">Activités</h5>
						</div>
						<!-- Card body START -->
						<div class="card-body">
							{% if role =="ROLE_MARCHANT"  %}
								{% for notification in notifications %}
									{% if notification.libelle == "Paiement"  %}
										{% if app.user == notification.fils %}
											<!-- Activity item START -->
											<div class="d-sm-flex justify-content-between align-items-center">
												<div
													class="d-flex align-items-sm-center me-4 ms-sm-0">
													<!-- Avatar -->
													<div class="avatar flex-shrink-0">
														<div class="avatar-img rounded-circle text-bg-success">
															<span class="position-absolute top-50 start-50 translate-middle fw-bold">
																<i class="bi bi-check-lg fs-5"></i>
															</span>
														</div>
													</div>
													<!-- Title -->
													<div class="ms-3">
														<h6 class="fw-light m-0">Prise de sous de
															<span class="fw-bold">
																{{notification.montant}}
																F
															</span>
															effectué par
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.createur.id})}}" class="text-primary">{{notification.fils.createur.FullName}}
															</a>
															chez le marchand
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
															</a>
														</h6>
														<small>{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
													</div>
												</div>
											</div>
											<!-- Activity item END -->
											<hr>
											<!-- Divider -->
										{% endif %}
									{% endif %}
									{% if notification.libelle == "Recharge"  %}
                                        {% if app.user == notification.fils  %}
                                            <!-- Activity item START -->
                                            <div
                                                class="d-sm-flex justify-content-between align-items-center">
                                                <!-- Avatar image -->
                                                <div class="d-flex align-items-sm-center me-4 ms-sm-0">
                                                    <div class="avatar flex-shrink-0">
                                                        <img class="avatar-img rounded-circle" src="assets/images/avatar/04.jpg" alt="">
                                                    </div>
                                                    <!-- Title -->
                                                    <div class="ms-3">
                                                        <h6 class="fw-light m-0">Recharge de
                                                            <span class="fw-bold">
                                                                {{notification.montant}}
                                                                F
                                                            </span>effectué par
                                                            <a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
                                                            </a>
                                                        </h6>
                                                        <small class="me-3">{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Activity item END -->                        
                                            <hr>
                                            <!-- Divider -->
                                        {% endif %}
									{% endif %}
									<!-- Card body END -->
								{% endfor %}
                            {% endif %}                            
							{% if role =="ROLE_SUPERVISEUR"  %}
								{% for notification in notifications %}
									{% if notification.libelle == "Paiement"  %}
										{% if (app.user == notification.fils) or (app.user == notification.fils.createur) %}
											<!-- Activity item START -->
											<div class="d-sm-flex justify-content-between align-items-center">
												<div
													class="d-flex align-items-sm-center me-4 ms-sm-0">
													<!-- Avatar -->
													<div class="avatar flex-shrink-0">
														<div class="avatar-img rounded-circle text-bg-success">
															<span class="position-absolute top-50 start-50 translate-middle fw-bold">
																<i class="bi bi-check-lg fs-5"></i>
															</span>
														</div>
													</div>
													<!-- Title -->
													<div class="ms-3">
														<h6 class="fw-light m-0">Prise de sous de
															<span class="fw-bold">
																{{notification.montant}}
																F
															</span>
															effectué par
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.createur.id})}}" class="text-primary">{{notification.fils.createur.FullName}}
															</a>
															chez le marchand
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
															</a>
														</h6>
														<small>{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
													</div>
												</div>
											</div>
											<!-- Activity item END -->
											<hr>
											<!-- Divider -->
										{% endif %}
									{% endif %}
									{% if notification.libelle == "Recharge"  %}
                                        {% if app.user == notification.fils.createur  %}
                                            <!-- Activity item START -->
                                            <div
                                                class="d-sm-flex justify-content-between align-items-center">
                                                <!-- Avatar image -->
                                                <div class="d-flex align-items-sm-center me-4 ms-sm-0">
                                                    <div class="avatar flex-shrink-0">
                                                        <img class="avatar-img rounded-circle" src="assets/images/avatar/04.jpg" alt="">
                                                    </div>
                                                    <!-- Title -->
                                                    <div class="ms-3">
                                                        <h6 class="fw-light m-0">Recharge de
                                                            <span class="fw-bold">
                                                                {{notification.montant}}
                                                                F
                                                            </span>effectué par
                                                            <a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
                                                            </a>
                                                        </h6>
                                                        <small class="me-3">{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Activity item END -->                        
                                            <hr>
                                            <!-- Divider -->
                                        {% endif %}
									{% endif %}
									<!-- Card body END -->
								{% endfor %}
                            {% endif %}                           
							{% if role =="ROLE_SUPER_MARCHANT"  %}
								{% for notification in notifications %}
									{% if notification.libelle == "Paiement"  %}
										{% if app.user == notification.fils.createur %}
											<!-- Activity item START -->
											<div class="d-sm-flex justify-content-between align-items-center">
												<div
													class="d-flex align-items-sm-center me-4 ms-sm-0">
													<!-- Avatar -->
													<div class="avatar flex-shrink-0">
														<div class="avatar-img rounded-circle text-bg-success">
															<span class="position-absolute top-50 start-50 translate-middle fw-bold">
																<i class="bi bi-check-lg fs-5"></i>
															</span>
														</div>
													</div>
													<!-- Title -->
													<div class="ms-3">
														<h6 class="fw-light m-0">Prise de sous de
															<span class="fw-bold">
																{{notification.montant}}
																F
															</span>
															effectué par
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.createur.id})}}" class="text-primary">{{notification.fils.createur.FullName}}
															</a>
															chez le marchand
															<a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
															</a>
														</h6>
														<small>{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
													</div>
												</div>
											</div>
											<!-- Activity item END -->
											<hr>
											<!-- Divider -->
										{% endif %}
									{% endif %}
									{% if notification.libelle == "Recharge"  %}
                                        {% if app.user == notification.fils.createur.createur  %}
                                            <!-- Activity item START -->
                                            <div
                                                class="d-sm-flex justify-content-between align-items-center">
                                                <!-- Avatar image -->
                                                <div class="d-flex align-items-sm-center me-4 ms-sm-0">
                                                    <div class="avatar flex-shrink-0">
                                                        <img class="avatar-img rounded-circle" src="assets/images/avatar/04.jpg" alt="">
                                                    </div>
                                                    <!-- Title -->
                                                    <div class="ms-3">
                                                        <h6 class="fw-light m-0">Recharge de
                                                            <span class="fw-bold">
                                                                {{notification.montant}}
                                                                F
                                                            </span>effectué par
                                                            <a href="{{path( 'app_supervisor_show', {id:notification.fils.id})}}" class="text-primary">{{notification.fils.FullName}}
                                                            </a>
                                                        </h6>
                                                        <small class="me-3">{{ notification.date|date('d M Y H:i', null, 'fr') }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Activity item END -->                        
                                            <hr>
                                            <!-- Divider -->
                                        {% endif %}
									{% endif %}
									<!-- Card body END -->
								{% endfor %}
                            {% endif %}
						</div>
					</div>
				</div>
			</div>
			<!-- Activities END -->
		</div>
	</section>
{% endblock %}
